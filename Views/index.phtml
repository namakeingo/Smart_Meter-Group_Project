<?php require('template/header.phtml') ?>

<div class="tabs-align">
    <ul class="nav nav-tabs">
        <li class="active">
            <a  href="#1" data-toggle="tab">Current Month</a>
        </li>
        <li>
            <a href="#2" data-toggle="tab">Predicted Cost</a>
        </li>
        <li>

        </li>
    </ul>
</div>
<a href="/test.php" >Set budget</a>
<div class="tab-content ">
    <div class="tab-pane active" id="1">
        <article id="page-iconcolumn" class="page-section">

            <section class="container">
                <p class="text-right">The current weather is:</p>
            </section>

            <section class="layout-iconcolumns container py-4">

                <div class="row text-center">

                    <section class="col-md-6 my-3">
                              <span id="energy1" class="fa-stack fa-2x color-red">
                                <i class="fas fa-circle-notch fa-9x circle-size"></i>
                              </span>
                        <h4 id="energy1" class="overlay-to-circle color-red"><i class="fas fa-bolt fa-7x"></i></h4>
                        <h3 id="energy1" class="in-circle color-red">Elec</h3>
                        <h3 class="under-circle">£<?php echo $view->totalElec; ?></h3>
                    </section>

                    <section class="col-md-6 my-3">
                            <span id="gas1" class="fa-stack fa-2x color-green">
                              <i class="fas fa-circle-notch fa-9x circle-size"></i>
                            </span>
                        <h4 id="gas1" class="overlay-to-circle color-green"><i class="fas fa-fire fa-7x"></i></h4>
                        <h3 id="gas1" class="in-circle color-green">Gas</h3>
                        <h3 class="under-circle">£<?php echo $view->totalGas; ?></h3>
                    </section>

                </div>

            </section>

        </article>
    </div>
    <div class="tab-pane " id="2">
        <article id="page-iconcolumn" class="page-section">

            <section class="container">
                <p class="text-right">The current weather is: <span class=""></span></p>
            </section>

            <section class="layout-iconcolumns container py-4">

                <div class="row text-center">

                    <section class="col-md-6 my-3">
                              <span id="energy2" class="fa-stack fa-2x color-red">
                                <i class="fas fa-circle-notch fa-9x circle-size"></i>
                              </span>
                        <h4 class="overlay-to-circle color-red"><i class="fas fa-bolt fa-7x"></i></h4>
                        <h3 class="in-circle color-red">Elec</h3>
                        <h3 class="under-circle"><?php echo round($view->predictedUsageElec[0]->getConsumption(), 2); ?>kWh</h3>
                    </section>

                    <section class="col-md-6 my-3">
                            <span id="gas2" class="fa-stack fa-2x color-orange">
                              <i class="fas fa-circle-notch fa-9x circle-size"></i>
                            </span>
                        <h4 class="overlay-to-circle color-orange"><i class="fas fa-fire fa-7x"></i></h4>
                        <h3 class="in-circle color-orange">Gas</h3>
                        <h3 class="under-circle"><?php echo round($view->predictedUsageGas[0]->getConsumption(), 2); ?>kWh</h3>
                    </section>

                </div>

            </section>

        </article>
    </div>
    <section class="container adjustPos">
    <p class="text-right"><button onclick="invertColor()" class="btn"><i id="adjustBtn" class="fas fa-adjust fa-4x"></i></button></p>
    <script type="text/javascript">
        function invertColor() {
            // the css we are going to inject
            var css = 'html {-webkit-filter: invert(100%);' +
                '-moz-filter: invert(100%);' +
                '-o-filter: invert(100%);' +
                '-ms-filter: invert(100%); }';

            var head = $('head')[0];
            var invertStyle = $('#invert')[0];

            if (invertStyle) {
                head.removeChild(invertStyle);
            } else {
                var style = document.createElement('style');

                style.type = 'text/css';
                style.id = 'invert';
                if (style.styleSheet){
                    style.styleSheet.cssText = css;
                } else {
                    style.appendChild(document.createTextNode(css));
                }

                //injecting the css to the head
                head.appendChild(style);
            }}

    </script>
    <script>
        window.onload = function{setStyle('energy1',<?php echo $view->totalElec; ?> ,20)};
        window.onload = function{setStyle('gas1',<?php echo $view->totalGas; ?> ,20)};
        window.onload = function{setStyle('energy3',<?php echo $view->totalElec*2; ?> ,20)};
        window.onload = function{setStyle('gas1',<?php echo $view->totalGas*2; ?> ,20)};

        function setStyle(ID, value, budget){
            var color;
            var budgetMed= budget/4*3;
            if (value < budgetMed) {
                color = " color-yellow";
            }
            else if (value < budget) {
                color = " color-orange";
            }
            else if (value >= budget) {
                color = " color-red";
            }
            var elements = document.getElementsByClassName(ID);
            elements[0].className = "fa-stack fa-2x "+color;
            elements[1].className = "overlay-to-circle "+color;
            elements[2].className = "in-circle "+color;
        }

    </script>
    </section>
</div>

<?php require('template/footer.phtml') ?>
